[gd_scene format=3 uid="uid://432q5kgg37fa"]

[ext_resource type="PackedScene" uid="uid://rvf074qch17a" path="res://entities/player/player.tscn" id="1_8pyld"]
[ext_resource type="Texture2D" uid="uid://dk28hu44mqq3n" path="res://materials/snow.png" id="1_ork3v"]
[ext_resource type="Texture2D" uid="uid://4jc5kgwsqhic" path="res://materials/MaskGame-MAPwithElfs.png" id="2_l4ihe"]
[ext_resource type="PackedScene" uid="uid://besyrekpdlapw" path="res://scenery/collision_walls.tscn" id="3_ork3v"]
[ext_resource type="PackedScene" uid="uid://nh430rmpdj0i" path="res://scenery/snowfall.tscn" id="4_a0rq3"]
[ext_resource type="PackedScene" uid="uid://c01opld3b52i3" path="res://scenery/snow_banks.glb" id="4_l4ihe"]
[ext_resource type="PackedScene" uid="uid://bykwnmcaycsik" path="res://scenery/trees.glb" id="5_doi4a"]
[ext_resource type="PackedScene" uid="uid://cf7nr22ao4mkq" path="res://entities/gnome/gnome.tscn" id="6_doi4a"]
[ext_resource type="PackedScene" uid="uid://dosljd40iaqcr" path="res://scenery/river.glb" id="6_vrddd"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_a0rq3"]
albedo_texture = ExtResource("1_ork3v")

[sub_resource type="PlaneMesh" id="PlaneMesh_g451t"]
material = SubResource("StandardMaterial3D_a0rq3")
size = Vector2(50, 50)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_ioiol"]
disable_ambient_light = true
disable_fog = true
disable_specular_occlusion = true
albedo_texture = ExtResource("2_l4ihe")

[sub_resource type="PlaneMesh" id="PlaneMesh_d01bh"]
material = SubResource("StandardMaterial3D_ioiol")
size = Vector2(50, 50)

[sub_resource type="WorldBoundaryShape3D" id="WorldBoundaryShape3D_8pyld"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_mndh0"]
sky_top_color = Color(1, 1, 1, 1)
sky_horizon_color = Color(0.56, 0.56, 0.56, 1)
sky_curve = 1.6970571
sky_energy_multiplier = 3.0
ground_bottom_color = Color(1, 1, 1, 1)
ground_curve = 1e-05
ground_energy_multiplier = 0.0

[sub_resource type="Sky" id="Sky_1x7oe"]
sky_material = SubResource("ProceduralSkyMaterial_mndh0")

[sub_resource type="Environment" id="Environment_l4ihe"]
background_mode = 2
sky = SubResource("Sky_1x7oe")
tonemap_mode = 3
ssr_enabled = true
ssao_enabled = true
glow_enabled = true
fog_enabled = true
fog_mode = 1
fog_light_energy = 1.28
fog_sun_scatter = 0.2
fog_density = 1.0
fog_sky_affect = 0.832
volumetric_fog_density = 0.6605
volumetric_fog_ambient_inject = 0.98

[sub_resource type="SphereShape3D" id="SphereShape3D_vrddd"]
radius = 3.480079

[node name="TestScene" type="Node" unique_id=1051480340]

[node name="Ground" type="MeshInstance3D" parent="." unique_id=472530435]
mesh = SubResource("PlaneMesh_g451t")

[node name="MapTemplate" type="MeshInstance3D" parent="." unique_id=288267578]
visible = false
mesh = SubResource("PlaneMesh_d01bh")

[node name="CollisionWalls" parent="." unique_id=1390098169 instance=ExtResource("3_ork3v")]

[node name="Boundaries" type="Node3D" parent="." unique_id=1658418817]

[node name="South" type="StaticBody3D" parent="Boundaries" unique_id=1210922241]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -25, 0, 0)

[node name="CollisionShape3D" type="CollisionShape3D" parent="Boundaries/South" unique_id=227453577]
transform = Transform3D(-4.371139e-08, 1, 0, -1, -4.371139e-08, 0, 0, 0, 1, 0, 0, 0)
shape = SubResource("WorldBoundaryShape3D_8pyld")

[node name="North" type="StaticBody3D" parent="Boundaries" unique_id=160791677]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 25, 0, 0)

[node name="CollisionShape3D" type="CollisionShape3D" parent="Boundaries/North" unique_id=712446322]
transform = Transform3D(-4.371139e-08, -1, 0, 1, -4.371139e-08, 0, 0, 0, 1, 0, 0, 0)
shape = SubResource("WorldBoundaryShape3D_8pyld")

[node name="West" type="StaticBody3D" parent="Boundaries" unique_id=831318273]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -25)

[node name="CollisionShape3D" type="CollisionShape3D" parent="Boundaries/West" unique_id=790083224]
transform = Transform3D(1.9106855e-15, 4.371139e-08, 1, 1, -4.371139e-08, 0, 4.371139e-08, 1, -4.371139e-08, 0, 0, 0)
shape = SubResource("WorldBoundaryShape3D_8pyld")

[node name="East" type="StaticBody3D" parent="Boundaries" unique_id=2035059019]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 25)

[node name="CollisionShape3D" type="CollisionShape3D" parent="Boundaries/East" unique_id=2073350830]
transform = Transform3D(1.9106855e-15, -4.371139e-08, 1, -1, -4.371139e-08, 0, 4.371139e-08, -1, -4.371139e-08, 0, 0, 0)
shape = SubResource("WorldBoundaryShape3D_8pyld")

[node name="Floor" type="StaticBody3D" parent="Boundaries" unique_id=67005757]

[node name="CollisionShape3D" type="CollisionShape3D" parent="Boundaries/Floor" unique_id=1210643836]
shape = SubResource("WorldBoundaryShape3D_8pyld")

[node name="WorldEnvironment" type="WorldEnvironment" parent="." unique_id=2125420096]
environment = SubResource("Environment_l4ihe")

[node name="Snowfall" parent="." unique_id=1282455166 instance=ExtResource("4_a0rq3")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 25, 0)

[node name="SnowBanks" parent="." unique_id=1339208480 instance=ExtResource("4_l4ihe")]

[node name="Trees" parent="." unique_id=1159743760 instance=ExtResource("5_doi4a")]

[node name="River" parent="." unique_id=2055334123 instance=ExtResource("6_vrddd")]
visible = false

[node name="Player" parent="." unique_id=153770063 instance=ExtResource("1_8pyld")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.92769814, 1.520216, 20.541727)

[node name="Gnome" parent="." unique_id=1379355462 node_paths=PackedStringArray("alert_area", "hiding_spot", "idle_spot") instance=ExtResource("6_doi4a")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4.132262, 0, 6.813633)
alert_area = NodePath("AlertArea")
hiding_spot = NodePath("HidingSpot")
idle_spot = NodePath("IdleSpot")

[node name="HidingSpot" type="Marker3D" parent="Gnome" unique_id=1235762725]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.29491806, 0.38373327, -4.3957214)

[node name="IdleSpot" type="Marker3D" parent="Gnome" unique_id=981201876]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.004737854, 0, -0.03463316)

[node name="AlertArea" type="Area3D" parent="Gnome" unique_id=202106984]
collision_layer = 0
collision_mask = 2

[node name="CollisionShape3D" type="CollisionShape3D" parent="Gnome/AlertArea" unique_id=1000657664]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.6532867, 0)
shape = SubResource("SphereShape3D_vrddd")
debug_color = Color(0.9036351, 0, 0.45045578, 1)

[connection signal="body_entered" from="Gnome/AlertArea" to="Gnome" method="_on_alert_area_body_entered"]
[connection signal="body_exited" from="Gnome/AlertArea" to="Gnome" method="_on_alert_area_body_exited"]
