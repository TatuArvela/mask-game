[gd_scene format=3 uid="uid://432q5kgg37fa"]

[ext_resource type="PackedScene" uid="uid://rvf074qch17a" path="res://entities/player/player.tscn" id="1_8pyld"]
[ext_resource type="Texture2D" uid="uid://dk28hu44mqq3n" path="res://materials/snow.png" id="1_ork3v"]
[ext_resource type="Texture2D" uid="uid://4jc5kgwsqhic" path="res://materials/MaskGame-MAPwithElfs.png" id="2_l4ihe"]
[ext_resource type="PackedScene" uid="uid://besyrekpdlapw" path="res://scenery/collision_walls.tscn" id="3_ork3v"]
[ext_resource type="PackedScene" uid="uid://nh430rmpdj0i" path="res://scenery/snowfall.tscn" id="4_a0rq3"]
[ext_resource type="PackedScene" uid="uid://c01opld3b52i3" path="res://scenery/snow_banks.glb" id="4_l4ihe"]
[ext_resource type="PackedScene" uid="uid://bykwnmcaycsik" path="res://scenery/trees.glb" id="5_doi4a"]
[ext_resource type="PackedScene" uid="uid://cf7nr22ao4mkq" path="res://entities/gnome/gnome.tscn" id="6_doi4a"]
[ext_resource type="PackedScene" uid="uid://dosljd40iaqcr" path="res://scenery/river.glb" id="6_vrddd"]
[ext_resource type="PackedScene" uid="uid://c6h0rf5o23ejb" path="res://scenery/flowers.glb" id="9_mj4xq"]
[ext_resource type="Script" uid="uid://b2h6smbg1i78" path="res://scenes/test_scene/game_manager.gd" id="10_g451t"]
[ext_resource type="PackedScene" uid="uid://rynlexmmmf0m" path="res://entities/gnome/alert_area.tscn" id="10_ioiol"]
[ext_resource type="PackedScene" uid="uid://b7rbiwqgyv6gf" path="res://scenery/weeds.glb" id="10_otg31"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_mndh0"]
sky_top_color = Color(1, 1, 1, 1)
sky_horizon_color = Color(0.56, 0.56, 0.56, 1)
sky_curve = 1.6970571
sky_energy_multiplier = 3.0
ground_bottom_color = Color(1, 1, 1, 1)
ground_curve = 1e-05
ground_energy_multiplier = 0.0

[sub_resource type="Sky" id="Sky_1x7oe"]
sky_material = SubResource("ProceduralSkyMaterial_mndh0")

[sub_resource type="Environment" id="Environment_l4ihe"]
background_mode = 2
sky = SubResource("Sky_1x7oe")
tonemap_mode = 3
ssr_enabled = true
ssao_enabled = true
glow_enabled = true
fog_enabled = true
fog_mode = 1
fog_light_energy = 1.28
fog_sun_scatter = 0.2
fog_density = 1.0
fog_sky_affect = 0.832
volumetric_fog_density = 0.6605
volumetric_fog_ambient_inject = 0.98

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_a0rq3"]
albedo_texture = ExtResource("1_ork3v")

[sub_resource type="PlaneMesh" id="PlaneMesh_g451t"]
material = SubResource("StandardMaterial3D_a0rq3")
size = Vector2(50, 50)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_ioiol"]
disable_ambient_light = true
disable_fog = true
disable_specular_occlusion = true
albedo_texture = ExtResource("2_l4ihe")

[sub_resource type="PlaneMesh" id="PlaneMesh_d01bh"]
material = SubResource("StandardMaterial3D_ioiol")
size = Vector2(50, 50)

[sub_resource type="WorldBoundaryShape3D" id="WorldBoundaryShape3D_8pyld"]

[node name="TestScene" type="Node" unique_id=1051480340]

[node name="GameManager" type="Node" parent="." unique_id=1065258272]
unique_name_in_owner = true
script = ExtResource("10_g451t")

[node name="Hud" type="Control" parent="." unique_id=1879344065]
layout_mode = 3
anchors_preset = 0
offset_right = 1920.0
offset_bottom = 1080.0

[node name="MarginContainer" type="MarginContainer" parent="Hud" unique_id=1982121150]
layout_mode = 0
offset_right = 1920.0
offset_bottom = 1080.0
theme_override_constants/margin_left = 10
theme_override_constants/margin_top = 10
theme_override_constants/margin_right = 10
theme_override_constants/margin_bottom = 10

[node name="HBoxContainer" type="HBoxContainer" parent="Hud/MarginContainer" unique_id=865921654]
layout_mode = 2
size_flags_horizontal = 8
size_flags_vertical = 8
alignment = 2

[node name="GnomesLabel" type="Label" parent="Hud/MarginContainer/HBoxContainer" unique_id=2013249852]
layout_mode = 2
theme_override_colors/font_shadow_color = Color(0, 0, 0, 0)
theme_override_constants/outline_size = 9
theme_override_font_sizes/font_size = 24
text = "Gnomes: "

[node name="GnomeCountLabel" type="Label" parent="Hud/MarginContainer/HBoxContainer" unique_id=2057090164]
unique_name_in_owner = true
layout_mode = 2
theme_override_colors/font_shadow_color = Color(0, 0, 0, 0)
theme_override_constants/outline_size = 9
theme_override_font_sizes/font_size = 32
text = "1/5"

[node name="HBoxContainer2" type="HBoxContainer" parent="Hud/MarginContainer" unique_id=2044858940]
layout_mode = 2
size_flags_horizontal = 0
size_flags_vertical = 8

[node name="GnomesLabel" type="Label" parent="Hud/MarginContainer/HBoxContainer2" unique_id=2093914795]
layout_mode = 2
theme_override_colors/font_shadow_color = Color(0, 0, 0, 0)
theme_override_constants/outline_size = 9
theme_override_font_sizes/font_size = 24
text = "Energy:"

[node name="Control" type="Control" parent="Hud/MarginContainer/HBoxContainer2" unique_id=2039227155]
layout_mode = 2

[node name="EnergyProgressBar" type="ProgressBar" parent="Hud/MarginContainer/HBoxContainer2/Control" unique_id=613885873]
unique_name_in_owner = true
layout_mode = 0
offset_left = 4.0
offset_right = 304.0
offset_bottom = 36.0
value = 50.0
show_percentage = false

[node name="HBoxContainer3" type="HBoxContainer" parent="Hud/MarginContainer" unique_id=482632527]
layout_mode = 2
size_flags_horizontal = 4
size_flags_vertical = 0

[node name="TimeLeftLabel" type="Label" parent="Hud/MarginContainer/HBoxContainer3" unique_id=1178149591]
unique_name_in_owner = true
layout_mode = 2
theme_override_colors/font_shadow_color = Color(0, 0, 0, 0)
theme_override_constants/outline_size = 9
theme_override_font_sizes/font_size = 36
text = "30"

[node name="CenterContainer" type="CenterContainer" parent="Hud/MarginContainer" unique_id=474080862]
layout_mode = 2

[node name="WinLabel" type="Label" parent="Hud/MarginContainer/CenterContainer" unique_id=73683996]
unique_name_in_owner = true
layout_mode = 2
theme_override_constants/outline_size = 8
theme_override_font_sizes/font_size = 64
text = "You're winner!"
horizontal_alignment = 1
vertical_alignment = 1

[node name="LoseLabel" type="Label" parent="Hud/MarginContainer/CenterContainer" unique_id=799728407]
unique_name_in_owner = true
layout_mode = 2
theme_override_constants/outline_size = 8
theme_override_font_sizes/font_size = 64
text = "It is too late now..."
horizontal_alignment = 1
vertical_alignment = 1

[node name="WorldEnvironment" type="WorldEnvironment" parent="." unique_id=2125420096]
environment = SubResource("Environment_l4ihe")

[node name="Ground" type="MeshInstance3D" parent="." unique_id=472530435]
mesh = SubResource("PlaneMesh_g451t")

[node name="MapTemplate" type="MeshInstance3D" parent="." unique_id=288267578]
visible = false
mesh = SubResource("PlaneMesh_d01bh")

[node name="Boundaries" type="Node3D" parent="." unique_id=1658418817]

[node name="South" type="StaticBody3D" parent="Boundaries" unique_id=1210922241]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -25, 0, 0)

[node name="CollisionShape3D" type="CollisionShape3D" parent="Boundaries/South" unique_id=227453577]
transform = Transform3D(-4.371139e-08, 1, 0, -1, -4.371139e-08, 0, 0, 0, 1, 0, 0, 0)
shape = SubResource("WorldBoundaryShape3D_8pyld")

[node name="North" type="StaticBody3D" parent="Boundaries" unique_id=160791677]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 25, 0, 0)

[node name="CollisionShape3D" type="CollisionShape3D" parent="Boundaries/North" unique_id=712446322]
transform = Transform3D(-4.371139e-08, -1, 0, 1, -4.371139e-08, 0, 0, 0, 1, 0, 0, 0)
shape = SubResource("WorldBoundaryShape3D_8pyld")

[node name="West" type="StaticBody3D" parent="Boundaries" unique_id=831318273]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -25)

[node name="CollisionShape3D" type="CollisionShape3D" parent="Boundaries/West" unique_id=790083224]
transform = Transform3D(1.9106855e-15, 4.371139e-08, 1, 1, -4.371139e-08, 0, 4.371139e-08, 1, -4.371139e-08, 0, 0, 0)
shape = SubResource("WorldBoundaryShape3D_8pyld")

[node name="East" type="StaticBody3D" parent="Boundaries" unique_id=2035059019]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 25)

[node name="CollisionShape3D" type="CollisionShape3D" parent="Boundaries/East" unique_id=2073350830]
transform = Transform3D(1.9106855e-15, -4.371139e-08, 1, -1, -4.371139e-08, 0, 4.371139e-08, -1, -4.371139e-08, 0, 0, 0)
shape = SubResource("WorldBoundaryShape3D_8pyld")

[node name="Floor" type="StaticBody3D" parent="Boundaries" unique_id=67005757]

[node name="CollisionShape3D" type="CollisionShape3D" parent="Boundaries/Floor" unique_id=1210643836]
shape = SubResource("WorldBoundaryShape3D_8pyld")

[node name="CollisionWalls" parent="." unique_id=1390098169 instance=ExtResource("3_ork3v")]

[node name="Snowfall" parent="." unique_id=1282455166 instance=ExtResource("4_a0rq3")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 25, 0)

[node name="SnowBanks" parent="." unique_id=1703543491 instance=ExtResource("4_l4ihe")]

[node name="Trees" parent="." unique_id=966723491 instance=ExtResource("5_doi4a")]

[node name="River" parent="." unique_id=1960711046 instance=ExtResource("6_vrddd")]

[node name="Flowers" parent="." unique_id=179631276 instance=ExtResource("9_mj4xq")]

[node name="Weeds" parent="." unique_id=715697305 instance=ExtResource("10_otg31")]

[node name="Player" parent="." unique_id=153770063 instance=ExtResource("1_8pyld")]
unique_name_in_owner = true
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -19.977701, 1.520216, 20.541727)

[node name="Gnomes" type="Node" parent="." unique_id=148694068]

[node name="Gnome1" parent="Gnomes" unique_id=1379355462 node_paths=PackedStringArray("hiding_spot", "idle_spot") instance=ExtResource("6_doi4a")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4.132262, 0, 6.813633)
hiding_spot = NodePath("HidingSpot")
idle_spot = NodePath("IdleSpot")

[node name="HidingSpot" type="Marker3D" parent="Gnomes/Gnome1" unique_id=1235762725]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.29491806, 0.38373327, -4.3957214)

[node name="IdleSpot" type="Marker3D" parent="Gnomes/Gnome1" unique_id=981201876]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.004737854, 0, -0.03463316)

[node name="AlertArea" parent="Gnomes/Gnome1" unique_id=1138878469 instance=ExtResource("10_ioiol")]

[node name="Gnome2" parent="Gnomes" unique_id=1337338378 node_paths=PackedStringArray("hiding_spot", "idle_spot") instance=ExtResource("6_doi4a")]
transform = Transform3D(0.40939763, 0, 0.9123561, 0, 1, 0, -0.9123561, 0, 0.40939763, -13.288012, 0, -14.85989)
hiding_spot = NodePath("HidingSpot")
idle_spot = NodePath("IdleSpot")

[node name="HidingSpot" type="Marker3D" parent="Gnomes/Gnome2" unique_id=606242620]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.29491806, 0.38373327, -4.3957214)

[node name="IdleSpot" type="Marker3D" parent="Gnomes/Gnome2" unique_id=18594044]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.004737854, 0, -0.03463316)

[node name="AlertArea" parent="Gnomes/Gnome2" unique_id=1327917895 instance=ExtResource("10_ioiol")]

[node name="Gnome3" parent="Gnomes" unique_id=2040221941 node_paths=PackedStringArray("hiding_spot", "idle_spot") instance=ExtResource("6_doi4a")]
transform = Transform3D(0.37497875, 0, 0.92703336, 0, 1, 0, -0.92703336, 0, 0.37497875, 6.8233395, 0, -14.024126)
hiding_spot = NodePath("HidingSpot")
idle_spot = NodePath("IdleSpot")

[node name="HidingSpot" type="Marker3D" parent="Gnomes/Gnome3" unique_id=325310742]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.29491806, 0.38373327, -4.3957214)

[node name="IdleSpot" type="Marker3D" parent="Gnomes/Gnome3" unique_id=1958978098]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.004737854, 0, -0.03463316)

[node name="AlertArea" parent="Gnomes/Gnome3" unique_id=323920459 instance=ExtResource("10_ioiol")]

[node name="Gnome4" parent="Gnomes" unique_id=635359709 node_paths=PackedStringArray("hiding_spot", "idle_spot") instance=ExtResource("6_doi4a")]
transform = Transform3D(-0.8030047, 0, 0.5959727, 0, 1, 0, -0.5959727, 0, -0.8030047, 18.409128, 0, -18.828417)
hiding_spot = NodePath("HidingSpot")
idle_spot = NodePath("IdleSpot")

[node name="HidingSpot" type="Marker3D" parent="Gnomes/Gnome4" unique_id=1460823753]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2.6614304, 0.38373327, -4.5160656)

[node name="IdleSpot" type="Marker3D" parent="Gnomes/Gnome4" unique_id=1668601054]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.004737854, 0, -0.03463316)

[node name="AlertArea" parent="Gnomes/Gnome4" unique_id=190320968 instance=ExtResource("10_ioiol")]

[node name="Gnome5" parent="Gnomes" unique_id=322659902 node_paths=PackedStringArray("hiding_spot", "idle_spot") instance=ExtResource("6_doi4a")]
transform = Transform3D(-0.92319685, 0, -0.3843274, 0, 1, 0, 0.3843274, 0, -0.92319685, 22.038559, 0, 13.920183)
hiding_spot = NodePath("HidingSpot")
idle_spot = NodePath("IdleSpot")

[node name="HidingSpot" type="Marker3D" parent="Gnomes/Gnome5" unique_id=1820530417]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -7.8186655, 0.38373327, 1.3324738)

[node name="IdleSpot" type="Marker3D" parent="Gnomes/Gnome5" unique_id=1296522020]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.004737854, 0, -0.03463316)

[node name="AlertArea" parent="Gnomes/Gnome5" unique_id=1163894159 instance=ExtResource("10_ioiol")]

[connection signal="body_entered" from="Gnomes/Gnome1/AlertArea" to="Gnomes/Gnome1" method="_on_alert_area_body_entered"]
[connection signal="body_exited" from="Gnomes/Gnome1/AlertArea" to="Gnomes/Gnome1" method="_on_alert_area_body_exited"]
[connection signal="body_entered" from="Gnomes/Gnome2/AlertArea" to="Gnomes/Gnome2" method="_on_alert_area_body_entered"]
[connection signal="body_exited" from="Gnomes/Gnome2/AlertArea" to="Gnomes/Gnome2" method="_on_alert_area_body_exited"]
[connection signal="body_entered" from="Gnomes/Gnome3/AlertArea" to="Gnomes/Gnome3" method="_on_alert_area_body_entered"]
[connection signal="body_exited" from="Gnomes/Gnome3/AlertArea" to="Gnomes/Gnome3" method="_on_alert_area_body_exited"]
[connection signal="body_entered" from="Gnomes/Gnome4/AlertArea" to="Gnomes/Gnome4" method="_on_alert_area_body_entered"]
[connection signal="body_exited" from="Gnomes/Gnome4/AlertArea" to="Gnomes/Gnome4" method="_on_alert_area_body_exited"]
[connection signal="body_entered" from="Gnomes/Gnome5/AlertArea" to="Gnomes/Gnome5" method="_on_alert_area_body_entered"]
[connection signal="body_exited" from="Gnomes/Gnome5/AlertArea" to="Gnomes/Gnome5" method="_on_alert_area_body_exited"]
